<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Card Details - The Greatest Card Game</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <a href="index.html" class="back-button">‚Üê Back to Search</a>
    
    <div class="card-container" id="cardDetails">
        <!-- Card details will be loaded from database.json -->
    </div>

    <script src="scripts/main.js"></script>
    <script>
        // Load data and display card
        fetch('database.json')
            .then(response => response.json())
            .then(data => {
                setupDarkMode();
                const urlParams = new URLSearchParams(window.location.search);
                const cardId = urlParams.get('id');
                const card = data.cards.find(c => c.id === cardId);
                
                if (card) {
                    displayCardDetails(card);
                    document.title = `${card.name} - The Greatest Card Game`;
                } else {
                    document.getElementById('cardDetails').innerHTML = `
                        <h2>Card not found</h2>
                        <p>The requested card could not be found in the database.</p>
                    `;
                }
            })
            .catch(error => console.error('Error loading database:', error));

        function displayCardDetails(card) {
            const cardDetails = document.getElementById('cardDetails');
            
            let statsHTML = '';
            if (card.stats) {
                for (const [key, value] of Object.entries(card.stats)) {
                    statsHTML += `
                        <div class="stat">
                            <div class="stat-label">${key.charAt(0).toUpperCase() + key.slice(1)}</div>
                            <div class="stat-value">${value}</div>
                        </div>
                    `;
                }
            }
            
            let rulesHTML = '';
            if (card.rules && card.rules.length > 0) {
                rulesHTML = `
                    <div class="card-rules">
                        <h3>Special Rules</h3>
                        <ul>
                            ${card.rules.map(rule => `<li>${rule}</li>`).join('')}
                        </ul>
                    </div>
                `;
            }
            
            cardDetails.innerHTML = `
                <div class="card-header">
                    <img src="${card.image}" alt="${card.name}" class="card-image">
                    <div>
                        <h1 class="card-title">${card.name}</h1>
                        <span class="card-type">${card.type}</span>
                        <div class="card-stats">
                            ${statsHTML}
                        </div>
                    </div>
                </div>
                <div class="card-description">
                    <p>${card.description}</p>
                </div>
                ${rulesHTML}
            `;
        }
    </script>
</body>
</html>
