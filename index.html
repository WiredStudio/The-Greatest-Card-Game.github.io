<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Greatest Card Game</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <button class="dark-mode-toggle" id="darkModeToggle">ðŸŒ“</button>
        <h1>The Greatest Card Game</h1>
        <p>Search for cards and learn how to play</p>
    </header>
    
    <div class="container">
        <div class="search-section">
            <div class="search-container">
                <input type="text" id="searchInput" placeholder="Search for a card (e.g. Goomba, Earth...)" autocomplete="off">
                <div id="autocompleteResults"></div>
            </div>
            
            <div class="quick-info">
                <h3>Quick Game Info</h3>
                <ul id="quickInfoList">
                    <li><strong>Deck Size:</strong> 32 Cards</li>
                    <li><strong>Starting HP:</strong> 25 PHP</li>
                    <li><strong>Starting Hand:</strong> 5 Cards</li>
                    <li><strong>Cards Drawn/Turn:</strong> 2</li>
                </ul>
            </div>
        </div>
        
        <div class="rules-section" id="rulesSection">
            <!-- Rules will be loaded from database.json -->
        </div>
    </div>

    <script src="scripts/main.js"></script>
    <script>
        // Load data and initialize page
        fetch('database.json')
            .then(response => response.json())
            .then(data => {
                window.cardDatabase = data.cards;
                displayRules(data.gameRules);
                setupSearch();
                setupDarkMode();
            })
            .catch(error => console.error('Error loading database:', error));

        function displayRules(rules) {
            const rulesSection = document.getElementById('rulesSection');
            rulesSection.innerHTML = `
                <h2>Game Rules</h2>
                <span class="rule-category">Game Setup</span>
                <ul class="rules-list">
                    ${rules.setup.map(rule => `<li>${rule}</li>`).join('')}
                </ul>
                
                <span class="rule-category">Turn Structure</span>
                <ul class="rules-list">
                    ${rules.turnStructure.map(rule => `<li>${rule}</li>`).join('')}
                </ul>
                
                <span class="rule-category">Gameplay</span>
                <ul class="rules-list">
                    ${rules.gameplay.map(rule => `<li>${rule}</li>`).join('')}
                </ul>
                
                <span class="rule-category">Special Rules</span>
                <ul class="rules-list">
                    ${rules.specialRules.map(rule => {
                        if (rule.includes('curse words')) {
                            return `<li>No curse words (<a href="https://en.wiktionary.org/wiki/Category:English_swear_words" target="_blank">defined here</a>)</li>`;
                        }
                        if (rule.includes('sexual comments')) {
                            return `<li>No sexual comments (<a href="https://www.eeoc.gov/sexual-harassment" target="_blank">defined here</a>)</li>`;
                        }
                        return `<li>${rule}</li>`;
                    }).join('')}
                </ul>
            `;
        }
    </script>
</body>
</html>
